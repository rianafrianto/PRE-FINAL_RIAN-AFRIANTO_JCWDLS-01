{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Riana\\\\OneDrive\\\\Desktop\\\\Mini Project\\\\fullstack\\\\frontend\\\\src\\\\pages\\\\reset\\\\CodeVerification.js\";\nimport { Form, Formik } from \"formik\";\nimport { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport LoginInput from \"../../components/inputs/loginInput\";\nimport * as Yup from \"yup\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CodeVerification(_ref) {\n  let {\n    code,\n    setCode,\n    error,\n    loading,\n    setLoading,\n    setVisible,\n    setError,\n    userInfos\n  } = _ref;\n  const validateCode = Yup.object({\n    code: Yup.string().required(\"Code is required\").min(\"5\", \"Code must be 5 characters.\").max(\"5\", \"Code must be 5 characters.\")\n  });\n  const {\n    email\n  } = userInfos;\n\n  const verifyCode = async () => {\n    try {\n      setLoading(true);\n      await axios.post(`${process.env.REACT_APP_BACKEND_URL}/validateResetCode`, {\n        email,\n        code\n      });\n      setVisible(3);\n      setError(\"\");\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      setError(error.response.data.message);\n    }\n  };\n\n  console.log(email);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"reset_form\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reset_form_header\",\n      children: \"Code verification\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reset_form_text\",\n      children: \"Please enter code that been sent to your email.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Formik, {\n      enableReinitialize: true,\n      initialValues: {\n        code\n      },\n      validationSchema: validateCode,\n      onSubmit: () => {\n        verifyCode();\n      },\n      children: formik => /*#__PURE__*/_jsxDEV(Form, {\n        children: [/*#__PURE__*/_jsxDEV(LoginInput, {\n          type: \"text\",\n          name: \"code\",\n          onChange: e => setCode(e.target.value),\n          placeholder: \"Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error_text\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reset_form_btns\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            className: \"gray_btn\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"blue_btn\",\n            children: \"Continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_c = CodeVerification;\n\nvar _c;\n\n$RefreshReg$(_c, \"CodeVerification\");","map":{"version":3,"sources":["C:/Users/Riana/OneDrive/Desktop/Mini Project/fullstack/frontend/src/pages/reset/CodeVerification.js"],"names":["Form","Formik","useState","Link","LoginInput","Yup","axios","CodeVerification","code","setCode","error","loading","setLoading","setVisible","setError","userInfos","validateCode","object","string","required","min","max","email","verifyCode","post","process","env","REACT_APP_BACKEND_URL","response","data","message","console","log","formik","e","target","value"],"mappings":"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","sourcesContent":["import { Form, Formik } from \"formik\";\r\nimport { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport LoginInput from \"../../components/inputs/loginInput\";\r\nimport * as Yup from \"yup\";\r\nimport axios from \"axios\";\r\nexport default function CodeVerification({\r\n  code,\r\n  setCode,\r\n  error,\r\n  loading,\r\n  setLoading,\r\n  setVisible,\r\n  setError,\r\n  userInfos,\r\n}) {\r\n  const validateCode = Yup.object({\r\n    code: Yup.string()\r\n      .required(\"Code is required\")\r\n      .min(\"5\", \"Code must be 5 characters.\")\r\n      .max(\"5\", \"Code must be 5 characters.\"),\r\n  });\r\n  const { email } = userInfos;\r\n  const verifyCode = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await axios.post(\r\n        `${process.env.REACT_APP_BACKEND_URL}/validateResetCode`,\r\n        { email, code }\r\n      );\r\n      setVisible(3);\r\n      setError(\"\");\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setLoading(false);\r\n      setError(error.response.data.message);\r\n    }\r\n  };\r\n  console.log(email);\r\n  return (\r\n    <div className=\"reset_form\">\r\n      <div className=\"reset_form_header\">Code verification</div>\r\n      <div className=\"reset_form_text\">\r\n        Please enter code that been sent to your email.\r\n      </div>\r\n      <Formik\r\n        enableReinitialize\r\n        initialValues={{\r\n          code,\r\n        }}\r\n        validationSchema={validateCode}\r\n        onSubmit={() => {\r\n          verifyCode();\r\n        }}\r\n      >\r\n        {(formik) => (\r\n          <Form>\r\n            <LoginInput\r\n              type=\"text\"\r\n              name=\"code\"\r\n              onChange={(e) => setCode(e.target.value)}\r\n              placeholder=\"Code\"\r\n            />\r\n            {error && <div className=\"error_text\">{error}</div>}\r\n            <div className=\"reset_form_btns\">\r\n              <Link to=\"/login\" className=\"gray_btn\">\r\n                Cancel\r\n              </Link>\r\n              <button type=\"submit\" className=\"blue_btn\">\r\n                Continue\r\n              </button>\r\n            </div>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}